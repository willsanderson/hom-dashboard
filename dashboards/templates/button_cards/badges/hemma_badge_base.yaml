# Base
hemma_badge_base:
  styles:
    card:
      - background: var(--badge-background)
      - box-shadow: var(--badge-shadow)
      - backdrop-filter: blur(8px)
      - -webkit-backdrop-filter: blur(8px)
      - border-radius: var(--badge-br, 9999px)
      - padding: var(--badge-padding-current, var(--badge-padding, 6px 14px))
      - min-height: var(--badge-min-height-current, var(--badge-min-height, 44px))
      - display: >
          [[[
            // If a badge passes variables.enabled, honor it.
            if (variables.enabled === undefined) return 'inline-grid';
            return variables.enabled ? 'inline-grid' : 'none';
          ]]]
      - align-items: center
      - gap: 0
      - width: fit-content
      - margin-inline-start: 0
      - margin-inline-end: 0
      - margin-block-start: 0
      - margin-block-end: 0
      - position: relative
      - isolation: isolate
      - --badge-title-color: var(--primary-text-color)
      - --badge-sub-color: var(--secondary-text-color)
      - background-clip: padding-box
      - overflow: hidden

    grid:
      - grid-template-areas: '"i l"'
      - grid-template-columns: min-content minmax(0, 1fr)
      - column-gap: var(--badge-col-gap-current, var(--badge-col-gap, 6px))
      - row-gap: 0
      - align-items: center

    name:
      - grid-area: l
      - min-width: 0
      - color: var(--badge-title-color, var(--secondary-text-color))
      - font-weight: 700
      - font-size: var(--badge-font-size-current, var(--badge-font-size, 13px))
      - line-height: 1.2
      - text-align: left
      - justify-self: start
      - z-index: 4

    icon:
      - grid-area: i
      - width: var(--badge-icon-size-current, var(--badge-icon-size, 28px))
      - height: var(--badge-icon-size-current, var(--badge-icon-size, 28px))
      - color: var(--primary-text-color)
      - z-index: 4
      - margin-inline-start: var(--badge-icon-nudge, 0px)

    entity_picture:
      - grid-area: i
      - width: var(--badge-icon-size-current, var(--badge-icon-size, 28px))
      - height: var(--badge-icon-size-current, var(--badge-icon-size, 28px))
      - border-radius: 50%
      - z-index: 4
      - object-fit: cover
      - margin-inline-start: var(--badge-icon-nudge, 0px)

    label:
      - font-size: var(--badge-font-size-current, var(--badge-font-size, 13px))

    state:
      - font-size: var(--badge-font-size-current, var(--badge-font-size, 13px))

  extra_styles: |
    :host{
      /* Keep only non-layout “helpers” here.
         All sizing “current” tokens now come from your theme. */
      --media-sub-opacity: .82;
      --badge-after-z:  2;
      --badge-before-z: 3;
    }

    ha-card::after{  z-index: var(--badge-after-z, 2) !important; }
    ha-card::before{ z-index: var(--badge-before-z, 3) !important; }

    #img-cell{
      width:  var(--badge-icon-size-current, var(--badge-icon-size, 32px)) !important;
      height: var(--badge-icon-size-current, var(--badge-icon-size, 32px)) !important;
      border-radius: 9999px !important;
      overflow: hidden !important;
      display: block !important;
    }

    #img-cell img,
    #img-cell ha-img{
      width: 100% !important;
      height: 100% !important;
      object-fit: cover !important;
      display: block !important;
      border-radius: inherit !important;
    }
